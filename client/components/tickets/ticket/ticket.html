<template name="ticket">
  <div class="animated flipInX
              ui fluid card ticket {{#if statusIs 'CLAIMED'}}claimed{{/if}}">
    <div class="content">
      {{#if userIs 'admin'}}
        <i class="right floated red remove link cancel button icon"></i>
      {{/if}}
      <div class="header">
        {{#if name }}
          {{name}}
        {{else}}
          有人
        {{/if}}
      </div>
      <div class="meta">
        <div class="date">
          {{fromNow}}
        </div>
      </div>

      <div class="description">

        {{#if topic}}
          {{topic}}
        {{else}}
          主题为空
        {{/if}}
        <br>

      </div>

      <strong>桌号： </strong>#{{location}} <br />
      <strong>联系方式: </strong>
      {{contact}}
    </div>
    <div class="extra content">
      {{#if statusIs "OPEN"}}

        {{#if ownsTicket}}
          <div class="right floated author">
            这是您提交的请求！
          </div>
        {{else}}

          {{#if hasClaimedTicket}}
            <button class="disabled primary fluid push button claim">认领请求</button>
          {{else}}
            <button class="primary fluid push button claim">认领请求</button>
          {{/if}}

        {{/if}}
      {{/if}}

      {{#if statusIs "CLAIMED"}}
        {{#if claimer}}
          <button class="fluid success push button complete">标志为已完成</button>
          <button class="fluid primary push button reopen">取消认领</button>
        {{else}}
          <div class="right floated author">
            已被 {{claimName}} 认领
          </div>
        {{/if}}
      {{/if}}

    </div>

  </div>
</template>
